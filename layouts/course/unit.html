<!DOCTYPE html>
<html lang="{{ .Page.Language | default "en" }}" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    {{ hugo.Generator }}
    {{ partial "meta.html" . }}
    {{ partial "favicon.html" . }}
    <title>{{ .Title }} :: {{ .Site.Title }}</title>

    {{ $assetBusting := not .Site.Params.disableAssetsBusting }}
    <link href="{{"css/nucleus.css" | relURL}}{{ if $assetBusting }}?{{ now.Unix }}{{ end }}" rel="stylesheet">
    <link href="{{"css/fontawesome-all.min.css" | relURL}}{{ if $assetBusting }}?{{ now.Unix }}{{ end }}" rel="stylesheet">
    <link href="{{"css/hybrid.css" | relURL}}{{ if $assetBusting }}?{{ now.Unix }}{{ end }}" rel="stylesheet">
    <link href="{{"css/featherlight.min.css" | relURL}}{{ if $assetBusting }}?{{ now.Unix }}{{ end }}" rel="stylesheet">
    <link href="{{"css/perfect-scrollbar.min.css" | relURL}}{{ if $assetBusting }}?{{ now.Unix }}{{ end }}" rel="stylesheet">
    <link href="{{"css/auto-complete.css" | relURL}}{{ if $assetBusting }}?{{ now.Unix }}{{ end }}" rel="stylesheet">
    <link href="{{"css/atom-one-dark-reasonable.css" | relURL}}{{ if $assetBusting }}?{{ now.Unix }}{{ end }}" rel="stylesheet">
    <link href="{{"css/theme.css" | relURL}}{{ if $assetBusting }}?{{ now.Unix }}{{ end }}" rel="stylesheet">
    <link href="{{"css/hugo-theme.css" | relURL}}{{ if $assetBusting }}?{{ now.Unix }}{{ end }}" rel="stylesheet">
    {{with .Site.Params.themeVariant}}
      <link href="{{(printf "css/theme-%s.css" .) | relURL}}{{ if $assetBusting }}?{{ now.Unix }}{{ end }}" rel="stylesheet">
    {{end}}
    <script src="{{"js/jquery-3.3.1.min.js"| relURL}}{{ if $assetBusting }}?{{ now.Unix }}{{ end }}"></script>

    {{ partial "styles.html" }}
    {{ partial "scripts.html" }}

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      {{ if .Site.Params.disableInlineCopyToClipBoard }}
        :not(pre) > code + span.copy-to-clipboard {
            display: none;
        }
      {{ end }}
    </style>
    {{ partial "custom-header.html" . }}
  </head>
  <body class="" data-url="{{ .RelPermalink }}">
    {{ partial "menu.html" . }}
        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              {{if not .IsHome}}
              <div>
                <div id="top-bar">
                {{$toc := (and (not .Params.disableToc) (not .Params.chapter))}}
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  {{ if $toc }}
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  {{ end }}
                  <span class="links">
                 {{$showBreadcrumb := (and (not .Params.disableBreadcrumb) (not .Site.Params.disableBreadcrumb))}}
                   {{ .Title }}
                  </span>
                </div>
                {{ if $toc }}
                    {{ partial "toc.html" . }}
                {{ end }}
              </div>
            </div>
            {{ end }}
        <div id="head-tags">
        {{ partial "tags.html" . }}
        </div>
        <div id="body-inner">

<!-- Get German HTML -->
{{ $de_title := "" }}
{{ $de_html := "" }}
{{ if eq "de" .Lang }}
	{{ $de_html = .Content }}
{{ else }}
	{{ $index_de := print .File.Dir "index.de.md" | replaceRE "\\\\" "/" }}
    {{ if fileExists $index_de }}
        {{ $de_title = readFile $index_de | replaceRE "(?s:\\+\\+\\+.*?title = \"(.*?)\".*?\\+\\+\\+.*)" "$1"  | markdownify }}
        {{ $de_html = readFile $index_de | replaceRE "(?s:\\+\\+\\+.*\\+\\+\\+)" "" | markdownify }}
	{{ end }}
{{ end }}

<span id="language-wrapper" class="hide-other-language">
<label for="show-translation"><span lang="de" class="de">Zeige die Übersetzung</span><br><span lang="en" class="en other-language">Show the Translation</span></label>
<input type="checkbox" name="show-translation" id="show-translation" />

<h1>{{ with and (ne "de" .Lang) $de_title }}
    <span lang="de" class="de">{{ . }}</span><br>
    <span lang="{{ $.Lang }}" class="{{ $.Lang }} other-language">{{ $.Title }}</span>

    {{ else }}
        {{ .Title }}
    {{ end }}
</h1>

{{ with $de_html }}
    <!-- Instruction. -->
    <p><span lang="de" class="de">Klicke unten auf ein deutsches Wort, um nützliche Informationen zu bekommen.</span><br><span lang="en" class="en other-language">Click on a German word below to get useful information.</span></p>

    <hr>

	<!-- Improve presentation of German text. -->
	{{ $smart_text := partial "functions/get-smart-text" (dict "de_html" $de_html "Site" $.Site) }}

	<div class="show-important Substantiv-enabled Verb-enabled" id="highlight-wrapper">

	{{ if eq "de" $.Lang }}
		{{ $smart_text.html | safeHTML }}
	{{ else }}

		<!-- Display both languages side by side. -->
		{{ $de := split $smart_text.html "</p>" }}
		{{ $other := split $.Content "<p>" }}

		{{ $k := sub (len $de) 1 }}
		{{ range $i := seq 1 $k }}
			<p><span lang="de" class="de">{{ index $de (sub $i 1) | replaceRE "<p>|</p>" "" | safeHTML }}</span><br>
			<span lang="{{ $.Lang }}" class="{{ $.Lang }} other-language">{{ index $other $i | replaceRE "<p>|</p>|\n" "" | safeHTML }}</span></p>
		{{ end }}

	{{ end }}
	</div>
	<hr>

	<p><span lang="de" class="de">Wähle aus, was du hervorheben möchtest:</span><br><span lang="en" class="en other-language">Select what you want to highlight:</span></p>

    <form><fieldset data-role="controlgroup" data-type="horizontal">
        <label for="show-important"><span lang="de" class="de">Wichtige Wörter</span><br><span lang="en" class="en other-language">Important Words</span></label>
        <input type="radio" name="highlight" id="show-important" checked/>
        <label for="show-genders"><span lang="de" class="de">Genera</span><br><span lang="en" class="en other-language">Genders</span></label>
        <input type="radio" name="highlight" id="show-genders" />
        <label for="show-wc"><span lang="de" class="de">Wortarten</span><br><span lang="en" class="en other-language">Word Classes</span></label>
        <input type="radio" name="highlight" id="show-wc" />
    </fieldset></form>

    <div id="show-important-expl" class="expl">
        <p>
            <span lang="de" class="de">Alle wichtigen Wörter werden anfangs <span class="important">gelb</span> hervorgehoben. Alle Wörter, die du schon angeklickt hast, werden <span class="checked">grün</span> hervorgehoben.</span><br>
            <span lang="en" class="en other-language">All important words are initially highlighted in <span class="important">yellow</span>. All words you have already clicked on are highlighted <span class="checked">green</span>.</span>
        </p>
        <p>
            <span lang="de" class="de">Wichtige Wörter, die du in dieser Lektion gelernt hast:</span>
            {{ range $i, $k := $smart_text.learned_words -}}
            {{- if ne $i 0 -}}, {{ end -}}
            <span basic-form="{{- $k -}}" >{{- $k -}}</span>
            {{- end -}}.<br>
            <span lang="en" class="en other-language">Important Words you learned in this lesson:</span> <!-- TODO translations -->
        </p>
    </div>

    <div id="show-genders-expl" class="expl hidden"><p><span lang="de" class="de">Die grammatikalischen Geschlechter von Substantiven werden hervorgehoben, zum Beispiel so: der <span class="noun-m">Mann</span> (männlich), die <span class="noun-f">Frau</span> (weiblich), das <span class="noun-n">Fahrrad</span> (sächlich).</span><br><span lang="en" class="en other-language">The grammatical genders of nouns are highlighted, e.g. like this: the <span class="noun-m">man</span> (masculine), the <span class="noun-f">woman</span> (feminine), the <span class="noun-n">bicycle</span> (neuter).</span></p></div>

    <div id="show-wc-expl" class="expl hidden"><p><span lang="de" class="de">Wortarten werden farblich hervorgehoben:</span><br><span lang="en" class="en other-language">Word classes are being highlighted:</span></p>

        <form><fieldset data-role="controlgroup">
        {{ $word_classes_main := slice "Substantiv" "Verb"}}
        {{ range $word_classes_main }}
            {{ if in $smart_text.word_classes . }}
                {{ $hyphenated := replace . " " "-" }}
                <label for="{{ $hyphenated }}-enabled"><span class="{{ $hyphenated }}"><span lang="de" class="de">{{ . }}</span></span><br>
                <span lang="{{ $.Lang }}" class="{{ $.Lang }} other-language">{{ i18n . }}</span></label>
                <input type="checkbox" name="{{ $hyphenated }}-enabled" id="{{ $hyphenated }}-enabled" class="check-wc-main" checked="checked" />
            {{ end }}
        {{ end }}
        </fieldset>
        <fieldset data-role="controlgroup" data-type="horizontal" data-mini="true">
        {{ range $smart_text.word_classes }}
            {{ if and (not (in $word_classes_main .)) (lt (len (findRE "\\Anoun-[mfn]" .)) 1) }}
                {{ $hyphenated := replace . " " "-" }}
                <label for="{{ $hyphenated }}"><span lang="de" class="de wc-selection">{{ . }}</span></span><br>
                    <span lang="{{ $.Lang }}" class="{{ $.Lang }} other-language">{{ i18n . }}</span></label>
			    <input type="radio" name="wc-choice" id="{{ $hyphenated }}" class="check-wc-choice" />
            {{ end }}
        {{ end }}
        </fieldset></form>
        <p><span lang="de" class="de">Achtung: Die Wörter werden nicht unbedingt mit der bestimmten Wortart gebraucht, die hervorgehoben wird. Es bedeutet lediglich, dass das Wort als Mitglied dieser Wortart gebraucht werden kann.</span><br><span lang="en" class="en other-language">Note: The words are not necessarily used with the particular word class that is highlighted. It just means that the word can be used as an member of this word class.</span></p>
    </div>



	<!-- TODO Link zur Anleitung am Anfang prominent als Popup oben mit Video, dann unten link zu externer Seite. -->





    {{ $smart_text.popups | safeHTML }}
    </span><!-- #language-wrapper -->
	<!-- TODO audio player -->
{{ else }}
	{{ $.Content }}
{{ end }}







<!--footer class=" footline" >
	{{with .Params.LastModifierDisplayName}}
	    <i class='fas fa-user'></i> <a href="mailto:{{ $.Params.LastModifierEmail }}">{{ . }}</a> {{with $.Date}} <i class='fas fa-calendar'></i> {{ .Format "02/01/2006" }}{{end}}
	    </div>
	{{end}}
</footer>-->


{{/* partial "footer.html" . */}}



